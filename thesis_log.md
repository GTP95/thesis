First idea to get users' data from PP was to use IRMA to disclose the data needed to compute the pseudonym to some component that would then proceed to generate it.
Doesn't work because the pseudonym is generated by encrypting a random string. But that random seed gets also stored inside salesforce, maybe I can get it from
there? To answer I need to know:
1. Is the seed stored along some data that uniquely identifies the user?
2. Does salesforce have some API to interface with other software?
The idea would be to develop a component that sits in front of salesforce. It authenticates the user using IRMA and then retrieves the correct identifier. Problem:
which component will then compute the pseudonym? To do that, you would need the private key that can't be given to the user. I would say that the component that
manages the authentication with the user could also compute the pseudonym and send it to the user (using an encrypted connection).
NOTE: Salesforce *does* have API access, but it also [depends on the edition]()(https://developer.salesforce.com/docs/atlas.en-us.242.0.api_rest.meta/api_rest/intro_rest_compatible_editions.htmi): "API access is available with Professional Edition, Performance Edition, Enterprise Edition, Unlimited Edition, and Developer Edition. For Professional
Edition, all requests for API access must be purchased and can be processed by contacting your Account Executive".
Accessing salesforce is a no-go. New idea: issue IRMA card with the identifier during the "enrollment" phase of a study participant.
PROBLEM: giving the participants their ID could reveal more than necessary. List of current ideas:
- Give participants their own ID during enrollment phase. 
    - Could be an unnecessary risk, plus they still need key material.
- Give participants a re-shuffled ID. 
    - Would solve the problem of giving them their real ID. They still need key material. How would this differ from creating a fake study?
- Create a fake study in which the participant has the researcher role. 
    - How would I insert the specific participant's data inside the fake study? Still need for key material
- Use IRMA's chained session: it is possible to derive a card from other cards the user already has by having the user disclose he attributes contained there. The server can then apply some function on the attributes and derive a new card from that. 
    - No need to use pseudonyms at all
    - Still need to provide the user with key material.


There is no column with the participant's pseudonym!!! It gets retrieved form somewhere else. Inside the row of a participant, I have the ParticipantIdentifier (the basis for getting a person's pseudonyms using reshuffling) and a ShortPseudinym, which is a random number that gets generated for each "sub-study" (i.e. for each medical test is done to the participant).
Currently, to give a participant access only to its own row, an administrator would need to create a group for each participant. 
Maybe another possibility is to write a new component separate from the rest of PEP that sits in front of it, with unlimited access to PEP that then gives to a user access to only its own data. But how can such a component link a user that authenticates via IRMA to its data? Actually there's an even bigger problem here:  such a component would have access to all *plaintext* data, since once enrolled in PEP would get a data key to be able to decrypt the data!. Even if I don't write code to actually decrypt the data, would this be an acceptable  single point of failure?
In the end, we decided to write a separate component, in the form of a web application, that integrates with PEP's login procedure. It works as another identity provider, the rest stays the same.

Problem: How to have some operations done server-side and other client-side inside the same webapp? It would be possible to use to different Rust web frameworks or
to write some JS code for the client-side. But then this would make it harder to use the `pepcli` tool to handle logging in and downloading files. Would running
everything client-side be an acceptable solution? The real problem here is if a malicious user would be able to trick the registration phase into generating a card with another user's credentials. But this doesn't seem a real issue though, as the registration phase is carried out in a "trusted" environment and not on the
user's PC. But still, how to use `pepcli`? Would it be possible to download it to the user's browser's local storage and use it from there? Or there is something
preventing me from using executables this way? 
I actually can't run everything client-side: a user could just send along the token making using IRMA pointless. So I need to mix client-side and server-side code.
A possible way of doing this is to convert `pepcli` to a `wasm` library and then call it from some `JS` code linked to the rest via static `HTML` files or templates.
